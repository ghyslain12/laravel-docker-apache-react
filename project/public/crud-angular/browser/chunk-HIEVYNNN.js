import{a as Ne}from"./chunk-EPHG3WUI.js";import{$ as z,A as Ue,B as we,C as xe,D as ye,E as Ee,F as Re,H as B,J as Ie,M as $,N as De,O as H,P as Fe,Q as Te,T as L,U as ke,V as v,W as h,X as q,Y as je,Z as Ae,_ as Q,c as x,d as y,e as E,f as se,g as le,h as pe,i as ce,j as ue,k as de,l as fe,m as ve,n as he,o as ge,p as Ce,q as _e,r as be,s as Me,t as O,v as P,x as Se,z as G}from"./chunk-24ZQDHAV.js";import"./chunk-JORF2XPE.js";import{$a as ae,Aa as d,Fa as N,Ib as U,J as A,Ja as o,K as oe,Ka as r,Kb as w,La as u,Lb as me,M as _,Ma as R,Na as I,Ob as ie,Pa as X,Ra as p,S as b,Sa as C,T as M,Wa as Y,Xa as Z,Ya as ee,ab as n,bb as te,cb as f,hb as V,ja as m,k,na as l,ra as S,sa as ne,v as j,wa as c}from"./chunk-47BL5O6Z.js";var Le=()=>[5,10,25,100];function qe(t,e){t&1&&(o(0,"th",16),n(1," ID "),r())}function Qe(t,e){if(t&1&&(o(0,"td",17),n(1),r()),t&2){let i=e.$implicit;m(),f(" ",i.id," ")}}function ze(t,e){t&1&&(o(0,"th",18),n(1,"Nom"),r())}function Je(t,e){if(t&1&&(o(0,"td",17),n(1),r()),t&2){let i=e.$implicit;m(),te(i.name)}}function Ke(t,e){t&1&&(o(0,"th",18),n(1,"Email"),r())}function We(t,e){if(t&1&&(o(0,"td",17),n(1),r()),t&2){let i=e.$implicit;m(),te(i.email)}}function Xe(t,e){t&1&&(o(0,"th",18),n(1,"Actions"),r())}function Ye(t,e){if(t&1){let i=X();o(0,"td",17)(1,"button",19),p("click",function(){let s=b(i).$implicit,g=C();return M(g.viewUser(s))}),n(2,"Voir"),r(),o(3,"button",19),p("click",function(){let s=b(i).$implicit,g=C();return M(g.editUser(s))}),n(4,"Modifier"),r(),o(5,"button",20),p("click",function(){let s=b(i).$implicit,g=C();return M(g.deleteUser(s))}),n(6,"Supprimer"),r()()}}function Ze(t,e){t&1&&u(0,"tr",21)}function et(t,e){t&1&&u(0,"tr",22)}function tt(t,e){if(t&1&&(o(0,"tr",23)(1,"td",24),n(2),r()()),t&2){C();let i=ae(7);m(2),f('No data matching the filter "',i.value,'"')}}var J=class t{constructor(e,i,a,s){this.genericService=e;this.dialog=i;this.router=a;this.activatedRoute=s}users=[];displayedColumns=["id","name","email","actions"];baseUri=v.baseUri;dataSource=new Me;paginator;sort;ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){let i=e.target.value;this.dataSource.filter=i.trim().toLowerCase()}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.users=e.users,this.dataSource.data=e.users})}loadUsers(){this.genericService.getAll(`${this.baseUri}/api/utilisateur`).subscribe(e=>{this.users=e})}viewUser(e){this.router.navigate(["/user/show",e.id]).then()}editUser(e){this.router.navigate(["/user/edit",e.id]).then()}deleteUser(e){this.dialog.open(se,{data:{message:"Voulez-vous vraiment supprimer cet utilisateur ?"}}).afterClosed().subscribe(a=>{a&&this.genericService.delete(`${this.baseUri}/api/utilisateur`,e.id).subscribe(()=>{this.loadUsers()})})}goToAddUser(){this.router.navigate(["/user/add"]).then()}static \u0275fac=function(i){return new(i||t)(l(h),l(E),l(w),l(U))};static \u0275cmp=S({type:t,selectors:[["app-user"]],viewQuery:function(i,a){if(i&1&&(Y($,5),Y(H,5)),i&2){let s;Z(s=ee())&&(a.paginator=s.first),Z(s=ee())&&(a.sort=s.first)}},decls:29,vars:5,consts:[["input",""],["matInput","","placeholder","Ex. Mia",3,"keyup"],["mat-raised-button","","color","primary","id","btnAjout",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,a){if(i&1){let s=X();o(0,"table")(1,"tr")(2,"td")(3,"mat-form-field")(4,"mat-label"),n(5,"Filter"),r(),o(6,"input",1,0),p("keyup",function($e){return b(s),M(a.applyFilter($e))}),r()()(),o(8,"td")(9,"button",2),p("click",function(){return b(s),M(a.goToAddUser())}),n(10,"Ajouter Utilisateur"),r()()()(),o(11,"div",3)(12,"table",4),R(13,5),c(14,qe,2,0,"th",6)(15,Qe,2,1,"td",7),I(),R(16,8),c(17,ze,2,0,"th",9)(18,Je,2,1,"td",7),I(),R(19,10),c(20,Ke,2,0,"th",9)(21,We,2,1,"td",7),I(),R(22,11),c(23,Xe,2,0,"th",9)(24,Ye,7,0,"td",7),I(),c(25,Ze,1,0,"tr",12)(26,et,1,0,"tr",13)(27,tt,3,1,"tr",14),r(),u(28,"mat-paginator",15),r()}i&2&&(m(12),d("dataSource",a.dataSource),m(13),d("matHeaderRowDef",a.displayedColumns),m(),d("matRowDefColumns",a.displayedColumns),m(2),d("pageSizeOptions",V(4,Le)))},dependencies:[be,le,ce,ve,ue,pe,he,de,fe,ge,Ce,_e,y,x,Te,H,Fe,De,$,ke,L,P,O],styles:["table[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}#btnAjout[_ngcontent-%COMP%]{margin-bottom:30px}"]})};var rt=()=>["/user"];function ot(t,e){t&1&&(o(0,"mat-form-field")(1,"mat-label"),n(2,"Password"),r(),u(3,"input",8),r())}var F=class t{constructor(e,i,a,s){this.fb=e;this.genericService=i;this.router=a;this.route=s;this.userForm=this.fb.group({name:["",G.required],email:["",[G.required,G.email]],password:["",null]})}userForm;isEditMode=!1;userId;titrePage="Ajouter";baseUri=v.baseUri;ngOnInit(){this.userId=this.route.snapshot.params.id,this.userId&&(this.titrePage="Modifier",this.isEditMode=!0,this.loadUser())}loadUser(){this.route.data.subscribe(e=>{this.userForm.patchValue(e.user)})}onSubmit(){if(this.userForm.valid){let e=this.userForm.value;(this.isEditMode&&this.userId?this.genericService.update(`${this.baseUri}/api/utilisateur`,this.userId,e):this.genericService.create(`${this.baseUri}/api/utilisateur`,e)).subscribe(()=>{this.router.navigate(["/user"]).then()})}}goBack(){this.router.navigate(["/user"]).then()}static \u0275fac=function(i){return new(i||t)(l(Re),l(h),l(w),l(U))};static \u0275cmp=S({type:t,selectors:[["app-user-form"]],decls:23,vars:7,consts:[["mat-raised-button","","color","primary",3,"click"],[1,"container"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","name"],["matInput","","formControlName","email","type","email"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"routerLink"],["matInput","","formControlName","password"]],template:function(i,a){i&1&&(o(0,"mat-card-actions")(1,"button",0),p("click",function(){return a.goBack()}),n(2,"Retour"),r()(),o(3,"div",1)(4,"h2"),n(5),r(),o(6,"form",2),p("ngSubmit",function(){return a.onSubmit()}),o(7,"mat-form-field")(8,"mat-label"),n(9,"Nom"),r(),u(10,"input",3),r(),u(11,"br"),o(12,"mat-form-field")(13,"mat-label"),n(14,"Email"),r(),u(15,"input",4),r(),u(16,"br"),c(17,ot,4,0,"mat-form-field"),o(18,"div",5)(19,"button",6),n(20),r(),o(21,"button",7),n(22,"Annuler"),r()()()()),i&2&&(m(5),f("",a.titrePage," un utilisateur"),m(),d("formGroup",a.userForm),m(11),N(a.isEditMode?-1:17),m(2),d("disabled",!a.userForm.valid),m(),f(" ",a.titrePage," "),m(),d("routerLink",V(6,rt)))},dependencies:[B,xe,Se,Ue,we,ye,Ee,me,y,x,O,L,Ie,P,z,Q],encapsulation:2})};var T=class t{constructor(e,i){this.user=e;this.dialog=i}baseUri=v.baseUri;resolve(e){return this.user.getById(`${this.baseUri}/api/utilisateur`,e.params.id).pipe(j(i=>(this.showErrorDialog(i.message),k("No data"))))}showErrorDialog(e){this.dialog.open(q,{width:"300px",data:{message:e}})}static \u0275fac=function(i){return new(i||t)(_(h),_(E))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};var K=class t{constructor(e,i){this.user=e;this.dialog=i}baseUri=v.baseUri;resolve(){return this.user.get(`${this.baseUri}/api/utilisateur`).pipe(j(e=>(this.showErrorDialog(e.message),k("No data"))))}showErrorDialog(e){this.dialog.open(q,{width:"300px",data:{message:e}})}static \u0275fac=function(i){return new(i||t)(_(h),_(E))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};function nt(t,e){if(t&1&&(o(0,"div",1)(1,"h2"),n(2,"User Details"),r(),o(3,"mat-card",2)(4,"mat-card-content")(5,"p")(6,"strong"),n(7,"Nome "),r(),n(8),r(),o(9,"p")(10,"strong"),n(11,"Email "),r(),n(12),r()()()()),t&2){let i=C();m(8),f(" ",i.user.name,""),m(4),f(" ",i.user.email,"")}}var W=class t{constructor(e,i){this.route=e;this.router=i}user;ngOnInit(){this.route.data.subscribe(e=>{this.user=e.user})}goBack(){this.router.navigate(["/user"]).then()}static \u0275fac=function(i){return new(i||t)(l(U),l(w))};static \u0275cmp=S({type:t,selectors:[["app-user-show"]],decls:4,vars:1,consts:[["mat-raised-button","","color","primary",3,"click"],[1,"container"],[1,"user-card"]],template:function(i,a){i&1&&(o(0,"mat-card-actions")(1,"button",0),p("click",function(){return a.goBack()}),n(2,"Retour"),r()(),c(3,nt,13,2,"div",1)),i&2&&(m(3),N(a.user?3:-1))},dependencies:[z,je,Q,Ae,y,x],styles:[".container[_ngcontent-%COMP%]{padding:20px}.user-card[_ngcontent-%COMP%]{max-width:400px;margin:20px 0}p[_ngcontent-%COMP%]{margin:10px 0}mat-card-actions[_ngcontent-%COMP%]{padding:0 16px 16px}button[_ngcontent-%COMP%]{margin-right:10px}"]})};var at=[{path:"",component:J,resolve:{users:Ne}},{path:"add",component:F,resolve:{ping:K}},{path:"edit/:id",component:F,resolve:{user:T}},{path:"show/:id",component:W,resolve:{user:T}}],Be=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=ne({type:t});static \u0275inj=oe({imports:[ie.forChild(at),B,ie]})};export{Be as UsersRoutingModule};
