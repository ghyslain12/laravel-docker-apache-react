import{a as $e}from"./chunk-SZTDLEC2.js";import{a as B}from"./chunk-EPHG3WUI.js";import"./chunk-MS4AQ6UA.js";import{$ as P,A as ye,B as Ee,C as Re,D as Ie,E as De,F as Fe,H as j,I as Te,J as ke,K as Ue,L as Ae,M as V,N as je,O as G,P as Ve,Q as Ge,T as N,U as Ne,V as y,W as v,X as Oe,Y as Pe,Z as Be,_ as O,c as x,d as w,e as k,f as ce,g as se,h as pe,i as de,j as ue,k as fe,l as Ce,m as ve,n as _e,o as he,p as ge,q as Se,r as be,s as Me,t as U,u as xe,v as A,x as we,z as Y}from"./chunk-24ZQDHAV.js";import"./chunk-JORF2XPE.js";import{$a as ae,Aa as d,Fa as E,Ha as oe,Ia as re,Ib as b,J as te,Ja as o,K as ie,Ka as n,Kb as M,La as _,Lb as me,M as L,Ma as R,Na as I,Ob as X,Pa as Q,Ra as p,S as h,Sa as C,T as g,Wa as z,Xa as J,Ya as K,ab as r,bb as W,cb as u,hb as T,ja as l,k as Z,na as c,ra as S,sa as ne,v as ee,wa as s,zb as le}from"./chunk-47BL5O6Z.js";var D=class t{constructor(e,i){this.client=e;this.dialog=i}baseUri=y.baseUri;resolve(e){return this.client.getById(`${this.baseUri}/api/client`,e.params.id).pipe(ee(i=>(this.showErrorDialog(i.message),Z("No data"))))}showErrorDialog(e){this.dialog.open(Oe,{width:"300px",data:{message:e}})}static \u0275fac=function(i){return new(i||t)(L(v),L(k))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ye=()=>["/client"],Ze=(t,e)=>e.id;function et(t,e){if(t&1&&(o(0,"mat-option",9),r(1),n()),t&2){let i=e.$implicit;d("value",i.id),l(),u(" ",i.name," ")}}function tt(t,e){t&1&&(o(0,"mat-error"),r(1," La s\xE9lection d'un utilisateur est requise "),n())}function it(t,e){if(t&1&&(o(0,"mat-form-field",4)(1,"mat-label"),r(2,"utilisateurs"),n(),o(3,"mat-select",8),oe(4,et,2,2,"mat-option",9,Ze),n(),s(6,tt,2,0,"mat-error"),n()),t&2){let i,a=C();l(4),re(a.users),l(2),E((i=a.clientForm.get("user_id"))!=null&&i.hasError("required")?6:-1)}}var F=class t{constructor(e,i,a,m,f){this.fb=e;this.genericService=i;this.genericServiceUser=a;this.router=m;this.route=f;this.clientForm=this.fb.group({surnom:["",Y.required],user_id:["",Y.required]})}clientForm;isEditMode=!1;clientId;titrePage="Ajouter";users=[];baseUri=y.baseUri;ngOnInit(){this.clientId=this.route.snapshot.params.id,this.clientId?(this.titrePage="Modifier",this.isEditMode=!0,this.loadClients()):this.loadUsers()}loadClients(){this.route.data.subscribe(e=>{this.users=e.users,this.clientForm.patchValue(e.client)})}loadUsers(){this.route.data.subscribe(e=>{this.users=e.users})}onSubmit(){if(this.clientForm.valid){let e=this.clientForm.value;(this.isEditMode&&this.clientId?this.genericService.update(`${this.baseUri}/api/client`,this.clientId,e):this.genericService.create(`${this.baseUri}/api/client`,e)).subscribe(()=>{this.router.navigate(["/client"]).then()})}}goBack(){this.router.navigate(["/client"]).then()}static \u0275fac=function(i){return new(i||t)(c(Fe),c(v),c(v),c(M),c(b))};static \u0275cmp=S({type:t,selectors:[["app-client-form"]],decls:18,vars:7,consts:[["mat-raised-button","","color","primary",3,"click"],[1,"container"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","surnom","type","surnom"],["appearance","outline",1,"full-width"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"routerLink"],["formControlName","user_id"],[3,"value"]],template:function(i,a){i&1&&(o(0,"mat-card-actions")(1,"button",0),p("click",function(){return a.goBack()}),r(2,"Retour"),n()(),o(3,"div",1)(4,"h2"),r(5),n(),o(6,"form",2),p("ngSubmit",function(){return a.onSubmit()}),o(7,"mat-form-field")(8,"mat-label"),r(9,"Surnom"),n(),_(10,"input",3),n(),_(11,"br"),s(12,it,7,1,"mat-form-field",4),o(13,"div",5)(14,"button",6),r(15),n(),o(16,"button",7),r(17,"Annuler"),n()()()()),i&2&&(l(5),u("",a.titrePage," un client"),l(),d("formGroup",a.clientForm),l(6),E(a.users?12:-1),l(2),d("disabled",!a.clientForm.valid),l(),u(" ",a.titrePage," "),l(),d("routerLink",T(6,Ye)))},dependencies:[j,Re,we,ye,Ee,Ie,De,me,le,w,x,U,N,ke,A,xe,Ae,Ue,Te,P,O],encapsulation:2})};var nt=()=>[5,10,25,100];function ot(t,e){t&1&&(o(0,"th",16),r(1," ID "),n())}function rt(t,e){if(t&1&&(o(0,"td",17),r(1),n()),t&2){let i=e.$implicit;l(),u(" ",i.id," ")}}function at(t,e){t&1&&(o(0,"th",18),r(1,"Surom"),n())}function lt(t,e){if(t&1&&(o(0,"td",17),r(1),n()),t&2){let i=e.$implicit;l(),W(i.surnom)}}function mt(t,e){t&1&&(o(0,"th",18),r(1,"User"),n())}function ct(t,e){if(t&1&&(o(0,"td",17),r(1),n()),t&2){let i=e.$implicit;l(),W(i.user.name)}}function st(t,e){t&1&&(o(0,"th",18),r(1,"Actions"),n())}function pt(t,e){if(t&1){let i=Q();o(0,"td",17)(1,"button",19),p("click",function(){let m=h(i).$implicit,f=C();return g(f.viewClient(m))}),r(2,"Voir"),n(),o(3,"button",19),p("click",function(){let m=h(i).$implicit,f=C();return g(f.editClient(m))}),r(4,"Modifier"),n(),o(5,"button",20),p("click",function(){let m=h(i).$implicit,f=C();return g(f.deleteClient(m))}),r(6,"Supprimer"),n()()}}function dt(t,e){t&1&&_(0,"tr",21)}function ut(t,e){t&1&&_(0,"tr",22)}function ft(t,e){if(t&1&&(o(0,"tr",23)(1,"td",24),r(2),n()()),t&2){C();let i=ae(7);l(2),u('No data matching the filter "',i.value,'"')}}var H=class t{constructor(e,i,a,m,f){this.genericService=e;this.genericServiceUser=i;this.dialog=a;this.router=m;this.activatedRoute=f}clients=[];users=[];displayedColumns=["id","surnom","users","actions"];dataSource=new Me;baseUri=y.baseUri;paginator;sort;ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){let i=e.target.value;this.dataSource.filter=i.trim().toLowerCase()}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.users=e.users,this.clients=e.clients,this.dataSource.data=e.clients})}loadClients(){this.genericService.getAll(`${this.baseUri}/api/client`).subscribe(e=>{this.clients=e})}viewClient(e){this.router.navigate(["/client/show",e.id]).then()}editClient(e){this.router.navigate(["/client/edit",e.id]).then()}deleteClient(e){this.dialog.open(ce,{data:{message:"Voulez-vous vraiment supprimer ce client ?"}}).afterClosed().subscribe(a=>{a&&this.genericService.delete(`${this.baseUri}/api/client`,e.id).subscribe(()=>{this.loadClients()})})}goToAddUser(){this.router.navigate(["/client/add"]).then()}static \u0275fac=function(i){return new(i||t)(c(v),c(v),c(k),c(M),c(b))};static \u0275cmp=S({type:t,selectors:[["app-client"]],viewQuery:function(i,a){if(i&1&&(z(V,5),z(G,5)),i&2){let m;J(m=K())&&(a.paginator=m.first),J(m=K())&&(a.sort=m.first)}},decls:29,vars:5,consts:[["input",""],["matInput","","placeholder","Ex. Mia",3,"keyup"],["mat-raised-button","","color","primary","id","btnAjout",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","surnom"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","users"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,a){if(i&1){let m=Q();o(0,"table")(1,"tr")(2,"td")(3,"mat-form-field")(4,"mat-label"),r(5,"Filter"),n(),o(6,"input",1,0),p("keyup",function(Je){return h(m),g(a.applyFilter(Je))}),n()()(),o(8,"td")(9,"button",2),p("click",function(){return h(m),g(a.goToAddUser())}),r(10,"Ajouter Client"),n()()()(),o(11,"div",3)(12,"table",4),R(13,5),s(14,ot,2,0,"th",6)(15,rt,2,1,"td",7),I(),R(16,8),s(17,at,2,0,"th",9)(18,lt,2,1,"td",7),I(),R(19,10),s(20,mt,2,0,"th",9)(21,ct,2,1,"td",7),I(),R(22,11),s(23,st,2,0,"th",9)(24,pt,7,0,"td",7),I(),s(25,dt,1,0,"tr",12)(26,ut,1,0,"tr",13)(27,ft,3,1,"tr",14),n(),_(28,"mat-paginator",15),n()}i&2&&(l(12),d("dataSource",a.dataSource),l(13),d("matHeaderRowDef",a.displayedColumns),l(),d("matRowDefColumns",a.displayedColumns),l(2),d("pageSizeOptions",T(4,nt)))},dependencies:[be,se,de,ve,ue,pe,_e,fe,Ce,he,ge,Se,w,x,Ge,G,Ve,je,V,Ne,N,A,U],styles:["table[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}#btnAjout[_ngcontent-%COMP%]{margin-bottom:30px}"]})};function Ct(t,e){if(t&1&&(o(0,"div",1)(1,"h2"),r(2,"Client Details"),n(),o(3,"mat-card",2)(4,"mat-card-content")(5,"p")(6,"strong"),r(7,"Surnom "),n(),r(8),n(),o(9,"p")(10,"strong"),r(11,"Utilisateur "),n(),r(12),n()()()()),t&2){let i=C();l(8),u(" ",i.client.surnom,""),l(4),u(" ",i.client.user.name,"")}}var q=class t{constructor(e,i){this.route=e;this.router=i}client;ngOnInit(){this.route.data.subscribe(e=>{this.client=e.client})}goBack(){this.router.navigate(["/client"]).then()}static \u0275fac=function(i){return new(i||t)(c(b),c(M))};static \u0275cmp=S({type:t,selectors:[["app-client-show"]],decls:4,vars:1,consts:[["mat-raised-button","","color","primary",3,"click"],[1,"container"],[1,"client-card"]],template:function(i,a){i&1&&(o(0,"mat-card-actions")(1,"button",0),p("click",function(){return a.goBack()}),r(2,"Retour"),n()(),s(3,Ct,13,2,"div",1)),i&2&&(l(3),E(a.client?3:-1))},dependencies:[P,Pe,O,Be,w,x],styles:[".container[_ngcontent-%COMP%]{padding:20px}.client-card[_ngcontent-%COMP%]{max-width:400px;margin:20px 0}p[_ngcontent-%COMP%]{margin:10px 0}mat-card-actions[_ngcontent-%COMP%]{padding:0 16px 16px}button[_ngcontent-%COMP%]{margin-right:10px}"]})};var vt=[{path:"",component:H,resolve:{clients:$e,users:B}},{path:"add",component:F,resolve:{users:B}},{path:"edit/:id",component:F,resolve:{client:D,users:B}},{path:"show/:id",component:q,resolve:{client:D}}],ze=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=ne({type:t});static \u0275inj=ie({imports:[X.forChild(vt),j,X]})};export{ze as ClientsRoutingModule};
